<?php

require 'lib/model/om/BaseEtvaSetting.php';


/**
 * Skeleton subclass for representing a row from the 'setting' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.1 on:
 *
 * Tue Apr 27 15:57:55 2010
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class EtvaSetting extends BaseEtvaSetting {
    
    /*
     * performs default keymap save and update server using default keymap (VNC_KEYMAP_DEFAULT==1)
     */
    public function saveVNCkeymap(PropelPDO $con = null)
	{		

		if ($con === null) {
			$con = Propel::getConnection(EtvaSettingPeer::DATABASE_NAME, Propel::CONNECTION_WRITE);
		}

		$con->beginTransaction();
		$isInsert = $this->isNew();
		try {

            parent::save($con);

            //select statement
            $c1 = new Criteria();
            $c1->add(EtvaServerPeer::VNC_KEYMAP_DEFAULT,1,Criteria::EQUAL);

            //update statement
            $c2 = new Criteria();
            $c2->add(EtvaServerPeer::VNC_KEYMAP,$this->getValue());

            BasePeer::doUpdate($c1, $c2, $con);            			

		
			$con->commit();
            return true;
			
		} catch (PropelException $e) {
			$con->rollBack();
			throw $e;
		}
	}

} // EtvaSetting
